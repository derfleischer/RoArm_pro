# ============================================
# calibration/__init__.py (erweitert)
# ============================================
"""
RoArm M3 Calibration Suite
Professionelle Kalibrierung für präzise Bewegungen
"""

__version__ = '3.0.0'
__author__ = 'RoArm Professional Team'

# Standard Calibration
from .calibration_suite import (
    CalibrationSuite,
    CalibrationType,
    CalibrationPoint,
    JointCalibration,
    ScannerCalibration,
    SystemCalibration
)

# Try Enhanced Calibration features
try:
    from enhanced.calibration import (
        AutoCalibration,
        VisionCalibration,
        MLCalibrationOptimizer,
        AdaptiveCalibration
    )
    ENHANCED_CALIBRATION = True
    
    # Extend CalibrationSuite with enhanced features
    class EnhancedCalibrationSuite(CalibrationSuite):
        """Extended calibration with ML and vision support."""
        
        def __init__(self, controller):
            super().__init__(controller)
            self.auto_calibration = AutoCalibration(controller)
            self.vision_calibration = None
            self.ml_optimizer = MLCalibrationOptimizer()
            self.adaptive = AdaptiveCalibration(controller)
            
        def run_vision_calibration(self):
            """Run vision-based calibration."""
            if not self.vision_calibration:
                from enhanced.vision import VisionSystem
                self.vision_calibration = VisionCalibration(
                    self.controller,
                    VisionSystem(self.controller)
                )
            return self.vision_calibration.calibrate()
        
        def optimize_with_ml(self):
            """Optimize calibration using ML."""
            return self.ml_optimizer.optimize(self.calibration)
    
    # Use enhanced version
    CalibrationSuite = EnhancedCalibrationSuite
    
except ImportError:
    ENHANCED_CALIBRATION = False
    # Keep standard CalibrationSuite

__all__ = [
    'CalibrationSuite',
    'CalibrationType',
    'CalibrationPoint',
    'JointCalibration', 
    'ScannerCalibration',
    'SystemCalibration',
    'ENHANCED_CALIBRATION'
]
