# ============================================
# safety/__init__.py
# ============================================
"""
RoArm M3 Safety System
Emergency stop, graceful shutdown, and monitoring
"""

__version__ = '3.0.0'
__author__ = 'RoArm Professional Team'

from .safety_system import (
    SafetySystem,
    SafetyState,
    ShutdownReason,
    SafetyEvent,
    SystemState
)

# Try Enhanced Safety features
try:
    from enhanced.safety import (
        PredictiveSafety,
        CollisionPrediction,
        ForceMonitoring,
        SafetyML
    )
    ENHANCED_SAFETY = True
    
    class EnhancedSafetySystem(SafetySystem):
        """Extended safety with predictive features."""
        
        def __init__(self, controller):
            super().__init__(controller)
            self.predictive = PredictiveSafety(controller)
            self.collision_predictor = CollisionPrediction(controller)
            self.force_monitor = ForceMonitoring(controller)
            self.safety_ml = SafetyML()
            
        def predict_collision(self, trajectory):
            """Predict potential collisions."""
            return self.collision_predictor.check(trajectory)
        
        def monitor_forces(self):
            """Monitor forces for anomalies."""
            return self.force_monitor.check()
    
    # Use enhanced version
    SafetySystem = EnhancedSafetySystem
    
except ImportError:
    ENHANCED_SAFETY = False

__all__ = [
    'SafetySystem',
    'SafetyState',
    'ShutdownReason',
    'SafetyEvent',
    'SystemState',
    'ENHANCED_SAFETY'
]
